# 对比试验索引

这个文档用于记录每次对比试验：**试验名称**、**要解决的问题**、**数据范围/口径**、**关键配置/命令**、**结果与结论**。

约定：
- 每个对比试验在 `docs/对比试验/week1/<试验名称>/` 下建立子文件夹。
- 子文件夹内至少包含一个 `报告.md`（可附加更多运行记录/数据说明）。
- `docs/` 根目录只保留“入口/跳转”类文档。

说明：为方便阅读与固定排序，子文件夹采用 `NN_<试验名称>/` 的编号前缀（例如 `01_组件来源对比/`）。

补充：临时验证用的 `check_*` / `debug_*` 套件目录已统一归档到 `docs/对比试验/week1/99_scratch/`，避免顶层目录被一次性跑分淹没。

补充2：编号但用途为 debug/诊断的目录（如 `36c_debug_1d` / `36d_zero_la_debug_p1p2` / `36e_zero_la_compare_g1_g3`）已统一归档到 `docs/对比试验/week1/90_diagnostics/`。

## 试验列表

| 试验名称 | 解决的问题 | 数据范围 | 入口文档 |
|---|---|---|---|
| 组件来源对比 | component 由谁决定（共识 vs LLM）以及对 LA/Final 的影响 | phase1：2025-06-07/08/10 全量（每日报 24） | docs/对比试验/week1/01_组件来源对比/报告.md |
| Final优化网格对比 | 多方案（含可组合）对 Final 的提升幅度与稳定性 | phase1：按天全量（见报告） | docs/对比试验/week1/02_Final优化网格对比/报告.md |
| 基线误差分析 | 解释基线 LA 偏低的主要错因（混淆/塌缩/偏置），指导下一步非训练型改进 | phase1：2025-06-07/08 全量（每日报 24） | docs/对比试验/week1/03_基线误差分析/报告.md |
| 基线纠偏方案对比 | 针对“先验偏置/副本名剥离/hints 未利用”做纠偏开关对比，验证是否缓解 adservice 塌缩并提升 LA/Final | phase1：按天全量（见报告） | docs/对比试验/week1/04_基线纠偏方案对比/报告.md |
| 坍缩原因诊断 | 定位 component 向 adservice 坍缩的来源（先验/记忆/权重/候选集），为后续提升 LA 的改造定方向 | phase1：按天全量（建议先跑 2025-06-07/08） | docs/对比试验/week1/05_坍缩原因诊断/报告.md |

| TZ修正后_LA提升验证 | 修复 telemetry 时间窗读取错配（UTC/本地日期）后，验证 LA/分布是否改善 | phase1：2025-06-07/08 全量（每日报 24） | docs/对比试验/week1/06_TZ修正后_LA提升验证/报告.md |
| LA提升_node_boost | 尝试用“服务压力→node boost”提升 node root-cause 的命中率 | phase1：2025-06-07/08 全量（每日报 24） | docs/对比试验/week1/07_LA提升_node_boost/报告.md |
| LA提升_node_boost_v2_logs | 在 node boost 中纳入 logs modality 触发条件，验证是否有增益 | phase1：2025-06-07/08 全量（每日报 24） | docs/对比试验/week1/08_LA提升_node_boost_v2_logs/报告.md |
| LA提升_metric_mem_weight | 提升 node memory 相关指标权重/异常强度计算，验证对 node case 的影响 | phase1：2025-06-07/08 全量（每日报 24） | docs/对比试验/week1/09_LA提升_metric_mem_weight/报告.md |
| LA提升_node_strong_override | 当 node CPU/memory 指标极强时，尝试优先 node（override） | phase1：2025-06-07/08 全量（每日报 24） | docs/对比试验/week1/10_LA提升_node_strong_override/报告.md |
| LA提升_prior消融 | prior on/off/light 消融，验证“关先验能否缓解服务坍缩并提升 LA” | phase1：2025-06-07/08 全量（每日报 24） | docs/对比试验/week1/11_LA提升_prior消融/报告.md |
| LA提升_node_metric_dominance | 引入“node metrics 主导”策略（强 node 指标 + 竞争力阈值）以提升 node case 的 LA | phase1：2025-06-07/08 全量（每日报 24） | docs/对比试验/week1/12_LA提升_node_metric_dominance/报告.md |

| LA扩展_phase1抽样7天_node_metric_dominance | 将 node_metric_dominance 策略扩展到更多日期进行稳定性验证 | phase1：抽样 7 天（见报告） | docs/对比试验/week1/13_LA扩展_phase1抽样7天_node_metric_dominance/报告.md |
| LA扩展_phase2抽样7天_node_metric_dominance | 将 node_metric_dominance 策略扩展到 phase2，观察域迁移问题（TiDB vs hipstershop） | phase2：抽样 7 天（见报告） | docs/对比试验/week1/14_LA扩展_phase2抽样7天_node_metric_dominance/报告.md |
| LA丢分点分析_phase1_node_metric_dominance | 基于扩展跑分产物统计 LA 失败样本与 Top 混淆对 | phase1：抽样 7 天（见报告） | docs/对比试验/week1/15_LA丢分点分析_phase1_node_metric_dominance/报告.md |
| LA丢分点分析_phase2_node_metric_dominance | 基于扩展跑分产物统计 LA 失败样本与 Top 混淆对（重点：tidb-tikv-0） | phase2：抽样 7 天（见报告） | docs/对比试验/week1/16_LA丢分点分析_phase2_node_metric_dominance/报告.md |

| LA扩展_phase1抽样7天_node_metric_dominance_tidbfix_rerun | 在引入 TiDB 域召回/排序修复后，重跑 phase1 抽样 7 天验证稳定性与副作用 | phase1：抽样 7 天（seed=7，见报告） | docs/对比试验/week1/17_LA扩展_phase1抽样7天_node_metric_dominance_tidbfix_rerun/报告.md |
| LA扩展_phase2抽样7天_node_metric_dominance_tidbfix_rerun | 在引入 TiDB 域召回/排序修复后，重跑 phase2 抽样 7 天验证 LA 是否提升 | phase2：抽样 7 天（seed=7，见报告） | docs/对比试验/week1/18_LA扩展_phase2抽样7天_node_metric_dominance_tidbfix_rerun/报告.md |
| LA丢分点分析_phase1_node_metric_dominance_tidbfix_rerun | 基于 17 的产物统计 LA 失败样本与 Top 混淆对（候选取平均 LA 最优方案） | phase1：抽样 7 天（seed=7，见报告） | docs/对比试验/week1/19_LA丢分点分析_phase1_node_metric_dominance_tidbfix_rerun/报告.md |
| LA丢分点分析_phase2_node_metric_dominance_tidbfix_rerun | 基于 18 的产物统计 LA 失败样本与 Top 混淆对（重点：tidb-* vs hipstershop） | phase2：抽样 7 天（seed=7，见报告） | docs/对比试验/week1/20_LA丢分点分析_phase2_node_metric_dominance_tidbfix_rerun/报告.md |

| LA扩展_phase1抽样7天_engineering_rules_v8 | 引入“fault vs normal 对照 + fault_level gate”工程规则路线，验证对 LA 的提升幅度 | phase1：抽样 7 天（seed=7，见报告） | docs/对比试验/week1/21_LA扩展_phase1抽样7天_engineering_rules_v8/报告.md |
| LA扩展_phase2抽样7天_engineering_rules_v8 | 工程规则路线扩展到 phase2，重点观察 TiDB 域与 node/service 误判变化 | phase2：抽样 7 天（seed=7，见报告） | docs/对比试验/week1/22_LA扩展_phase2抽样7天_engineering_rules_v8/报告.md |
| LA丢分点分析_phase1_engineering_rules_v8 | 基于 21 的产物统计 LA 失败样本与 Top 混淆对（候选取工程规则版） | phase1：抽样 7 天（seed=7，见报告） | docs/对比试验/week1/23_LA丢分点分析_phase1_engineering_rules_v8/报告.md |
| LA丢分点分析_phase2_engineering_rules_v8 | 基于 22 的产物统计 LA 失败样本与 Top 混淆对（候选取平均 LA 最优方案） | phase2：抽样 7 天（seed=7，见报告） | docs/对比试验/week1/24_LA丢分点分析_phase2_engineering_rules_v8/报告.md |

| LA扩展_phase1+phase2合并_engineering_rules_v9 | 补齐 logs/traces 的 baseline 对照（工程规则增强），并将 phase1+phase2 合并为一个 suite 统一评测 | phase1+phase2：各抽样 7 天（seed=7，见报告） | docs/对比试验/week1/25_LA扩展_phase1+phase2合并_engineering_rules_v9/报告.md |
